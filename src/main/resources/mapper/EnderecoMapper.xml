<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="java_core_api.api_java_core.mapper.EnderecoMapper">

    <!-- ResultMap completo -->
    <resultMap id="enderecoMap" type="java_core_api.api_java_core.domain.Endereco">
        <id property="id" column="id"/>
        <result property="tipoLogradouro" column="tipo_logradouro"/>
        <result property="logradouro" column="logradouro"/>
        <result property="numero" column="numero"/>
        <result property="complemento" column="complemento"/>
        <result property="bairro" column="bairro"/>
        <result property="cep" column="cep"/>
        <result property="telefone" column="telefone1"/>
        <result property="email" column="email"/>
        <result property="cidade" column="cidade_nome"/>
        <result property="estado" column="estado_nome"/>
        <result property="dataCriacao" column="data_criacao"/>
    </resultMap>

    <!-- Buscar endereço por ID -->
    <select id="findById" resultMap="enderecoMap">
        SELECT * FROM cadastro.endereco WHERE id = #{id}
    </select>

    <!-- Inserir endereço e retornar ID com PostgreSQL -->
    <insert id="inserirEndereco" parameterType="java_core_api.api_java_core.domain.Endereco" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO cadastro.endereco (
        tipo_logradouro,
        logradouro,
        numero,
        complemento,
        bairro,
        cep,
        telefone1,
        email,
        cidade_nome,
        estado_nome
        ) VALUES (
        #{tipoLogradouro},
        #{logradouro},
        #{numero},
        #{complemento},
        #{bairro},
        #{cep},
        #{telefone},
        #{email},
        #{cidade},
        #{estado}
        )
        RETURNING id
    </insert>

</mapper>
